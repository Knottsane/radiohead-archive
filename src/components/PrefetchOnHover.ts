export function mountPrefetch({delay=120}={}){ let t:number|undefined; function prefetch(href:string){ if(!href||href.startsWith('http')) return; if(document.querySelector(`link[rel="prefetch"][href="${href}"]`)) return; const l=document.createElement('link'); l.rel='prefetch'; l.href=href; document.head.appendChild(l);} document.addEventListener('mouseover',(e)=>{ const a=(e.target as HTMLElement).closest('a') as HTMLAnchorElement|null; if(!a) return; clearTimeout(t); t=window.setTimeout(()=>prefetch(a.getAttribute('href')||''),delay); },{passive:true}); }
