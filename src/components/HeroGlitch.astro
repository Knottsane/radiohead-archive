---
import TapeFrame from "./TapeFrame.astro";
const { headline = "RADIOHEAD", sub = "Archive & Lore" } = Astro.props;
const base = import.meta.env.BASE_URL;
---
<section class="relative min-h-[70vh] md:min-h-[85vh] flex items-center justify-center overflow-hidden">
  <div class="absolute inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-b from-black via-[#0a0a0a] to-black"></div>
    <img src={`${base}images/band.jpg`} alt="" class="absolute inset-0 w-full h-full object-cover opacity-15" loading="lazy" decoding="async" />
    <div data-parallax="0.35" class="absolute -inset-16 opacity-40 blur-3xl" style={`background: radial-gradient(60% 60% at 50% 40%, var(--ir-orange), transparent 60%), radial-gradient(50% 60% at 30% 80%, var(--ir-blue), transparent 60%), radial-gradient(60% 50% at 70% 70%, var(--ir-green), transparent 60%)`}></div>
  </div>

  <div class="text-center select-none">
    <h1 id="hero-headline" class="text-5xl md:text-7xl font-semibold tracking-tight rainbow-text rainbow-anim">{headline}</h1>
    <p class="mt-3 text-base md:text-lg text-neutral-300">{sub}</p>
    <div class="mt-8 flex items-center justify-center gap-4">
      <a class="px-4 py-2 bg-[color:var(--ir-yellow)] text-black font-mono" href={`${base}timeline`}>Enter</a>
      <a class="px-3 py-2 border border-neutral-700 hover:border-[color:var(--ir-yellow)]" href="#content">Skip intro</a>
    </div>
  </div>

  <TapeFrame />
  <div class="scanlines absolute inset-0" style={`background-image:url('${base}textures/scanlines.svg')`}></div>

  <script type="module">
    import { TextScramble } from "./TextScramble.ts";
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (!prefersReduced) {
      const el = document.getElementById('hero-headline');
      if (el) {
        const ts = new TextScramble(el);
        const phrases = ['RADIOHEAD', 'ARCHIVE', 'GLITCHED MEMORY', 'SIGNAL / NOISE'];
        let i = 0;
        setInterval(() => { ts.setText(phrases[i = (i+1) % phrases.length]); }, 2400);
      }
    }
  </script>
</section>
