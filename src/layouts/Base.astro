---
import "../styles/base.css";
import NoiseLayer from "../components/NoiseLayer.astro";
import SEO from "../components/SEO.astro";
import { base } from 'astro:config';
const { title = "Radiohead Archive", description = "Unofficial archive & lore", image = "/og/default.svg", noindex = false } = Astro.props;
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {noindex && <meta name="robots" content="noindex,nofollow" />}
    <SEO {title} {description} {image} />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Condensed:wght@400;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  </head>
  <body class="min-h-screen bg-[color:var(--bg)] text-[color:var(--fg)] font-sans antialiased">
    <a href="#content" class="sr-only-focusable absolute left-2 top-2 bg-black/80 text-[color:var(--acid)] px-3 py-2 rounded">Skip to content</a>

    <header class="px-4 md:px-6 py-4 flex items-center justify-between">
<a class="text-lg md:text-xl link-chroma" href={base}>Radiohead Archive</a>
      <nav class="flex gap-4 text-sm md:text-base">
<a class="hover:text-[color:var(--acid)] link-chroma" href={`${base}timeline`}>Timeline</a>
        <a class="hover:text-[color:var(--acid)] link-chroma" href={`${base}lore`}>Lore</a>
      </nav>
    </header>

    <main id="content" class="relative">
      <slot />
      <NoiseLayer />
    </main>

    <footer class="px-4 md:px-6 py-10 text-xs text-neutral-400">
      <p>Unofficial, for educational/fan archival use. Replace placeholder media with licensed assets.</p>
      <div class="mt-4">
<a aria-label="glitch link" class="opacity-60 hover:opacity-100 link-chroma" href={`${base}hidden/void`}>∴</a>
        <span class="ml-2">© {new Date().getFullYear()} Archive</span>
      </div>
    </footer>

    <script type="module">
      import("../components/ViewTransitionGlitch.ts").then(mod => mod.initViewTransitions?.());
      import("../components/ChromaticHover.ts").then(mod => mod.attachChromaticHover?.());
      import("../components/PrefetchOnHover.ts").then(mod => mod.mountPrefetch?.({ delay: 120 }));
      import("../components/Konami.ts").then(mod => mod.mountKonami?.());
    </script>
<div class="scanlines fixed inset-0 pointer-events-none" aria-hidden="true" style={`background-image:url('${base}textures/scanlines.svg')`}></div>
  </body>
</html>
