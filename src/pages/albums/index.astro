---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";
const base = import.meta.env.BASE_URL;
const albums = (await getCollection('albums')).sort((a,b)=> new Date(a.data.releaseDate).getTime()-new Date(b.data.releaseDate).getTime());
---
<Base title="Albums â€¢ Radiohead Archive" description="All albums">
  <section class="px-4 md:px-6 py-10">
    <h1 class="text-2xl md:text-3xl rainbow-text">Albums</h1>
    <div class="mt-6 grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
      {albums.map(({ slug, data }) => (
        <a href={`${base}albums/${slug}`} class="block card rainbow-border p-3">
          {data.cover ? <img src={data.cover} alt={data.title} class="w-full aspect-square object-cover border border-neutral-800" loading="lazy" decoding="async" /> : <div class="w-full aspect-square bg-neutral-900"></div>}
          <div class="mt-2 text-sm text-neutral-300">
            <div class="font-semibold">{data.title}</div>
            <div class="text-neutral-400">{new Date(data.releaseDate).getFullYear()}</div>
          </div>
        </a>
      ))}
    </div>
  </section>
</Base>