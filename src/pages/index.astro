---
import Base from "../layouts/Base.astro";
import HeroGlitch from "../components/HeroGlitch.astro";
import { getCollection } from "astro:content";
const base = import.meta.env.BASE_URL;
const albums = (await getCollection('albums')).sort((a,b)=> new Date(a.data.releaseDate).getTime()-new Date(b.data.releaseDate).getTime());
---
<Base title="Radiohead Archive" description="Grunge/glitch atmospheric archive & lore">
  <HeroGlitch headline="RADIOHEAD" sub="Archive // Lore // Signals" />
  <section class="px-4 md:px-6 py-14 space-y-8">
    <h2 class="text-xl md:text-2xl font-semibold rainbow-text">Signal/noise</h2>
    <p class="max-w-3xl text-neutral-300">
      Unofficial, fan-made archive anchored in the In Rainbows spectrum: bright, tactile, fast. No autoplay; motion respects your settings.
    </p>
    <div class="grid gap-6 md:grid-cols-3">
      <a href={`${base}timeline`} class="block p-5 card rainbow-border">
        <h3 class="font-mono">Timeline</h3>
        <p class="text-neutral-400">Scroll the eras, filter by albums or tours.</p>
      </a>
      <a href={`${base}lore`} class="block p-5 card rainbow-border">
        <h3 class="font-mono">Lore</h3>
        <p class="text-neutral-400">ARG hints, trivia, and artifacts.</p>
      </a>
      <a href={`${base}albums`} class="block p-5 card rainbow-border">
        <h3 class="font-mono">Albums</h3>
        <p class="text-neutral-400">Deep dives: metadata, tracks, live moments.</p>
      </a>
    </div>

    <div class="pt-8">
      <h3 class="font-mono text-neutral-300 mb-3">Albums at a glance</h3>
      <div class="grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-6">
        {albums.slice(0,6).map(({ slug, data }) => (
          <a href={`${base}albums/${slug}`} class="block group">
            {data.cover ? <img src={data.cover} alt={data.title} class="w-full aspect-square object-cover border border-neutral-800 group-hover:border-[color:var(--ir-yellow)] transition" loading="lazy" decoding="async" /> : <div class="w-full aspect-square bg-neutral-900"></div>}
            <div class="mt-1 text-xs text-neutral-400 group-hover:text-[color:var(--ir-yellow)] transition">{data.title}</div>
          </a>
        ))}
      </div>
    </div>
  </section>
</Base>
